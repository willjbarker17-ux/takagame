project:
  name: "football-tracker"
  version: "0.1.0"

video:
  input_path: "data/input/"
  output_path: "data/output/"
  cache_path: "data/cache/"

processing:
  frame_rate: 25
  batch_size: 8
  device: "cuda"
  half_precision: true

detection:
  player:
    model: "yolov8x.pt"
    confidence: 0.3
    iou_threshold: 0.5
    min_height: 30
    max_height: 400
  ball:
    model: "yolov8x.pt"
    confidence: 0.2
    temporal_window: 5

tracking:
  tracker: "bytetrack"
  track_high_thresh: 0.5
  track_low_thresh: 0.1
  new_track_thresh: 0.6
  track_buffer: 30
  match_thresh: 0.8

homography:
  method: "keypoint"
  min_keypoints: 4
  ransac_threshold: 3.0
  temporal_smoothing: true
  smoothing_window: 15

# Rotation handling for panning camera footage
# Enable this for footage where camera rotates/pans up to ~45 degrees
rotation:
  enabled: false  # Set to true for rotating camera footage
  max_angle: 45.0  # Maximum expected rotation angle in degrees
  rotation_threshold: 0.5  # Degrees/frame to consider camera rotating
  stabilization_frames: 10  # Frames camera must be stable before considered stopped
  buffer_size: 30  # Number of homographies to buffer for smoothing
  smoothing_factor: 0.3  # Homography smoothing (lower = smoother, higher = more responsive)
  redetection_interval: 100  # Re-detect pitch keypoints every N frames
  min_keypoints: 4  # Minimum keypoints needed for homography update

team_classification:
  method: "kmeans"
  n_clusters: 3
  color_space: "LAB"

identity:
  jersey_ocr:
    enabled: true
    confidence_threshold: 0.7
    aggregation_window: 50
  manual_init: true

metrics:
  speed_smoothing: 5
  sprint_threshold: 25.0
  high_intensity_threshold: 19.8

output:
  format: ["json", "csv"]
  include_raw_detections: false
  visualization: true
